{"ast":null,"code":"import { ElMessageBox } from 'element-plus';\nimport storageService from '@/service/storageService';\nimport userService from '@/service/userService';\nexport default {\n  data() {\n    return {\n      user: {\n        name: '',\n        password: '',\n        elephone: ''\n      },\n      rules: {\n        name: [{\n          required: false,\n          message: 'please input username',\n          trigger: 'blur'\n        }],\n        telephone: [{\n          required: true,\n          message: 'please input telephone',\n          trigger: 'blur'\n        }, {\n          pattern: /^1[3|4|5|7]\\d{9}$/,\n          message: '电话号码不合法',\n          trigger: ['blur']\n        }],\n        password: [{\n          required: true,\n          message: 'please input password',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          message: '密码不得少于六位',\n          trigger: ['blur']\n        }]\n      }\n    };\n  },\n  methods: {\n    register() {\n      userService.register(this.user).then(res => {\n        this.$store.commit('userModule/SET_TOKEN', res.data.data.token);\n        storageService.set(storageService.USER_TOKEN, res.data.data.token);\n        return userService.info();\n      }).then(response => {\n        storageService.set(storageService.USER_INFO, JSON.stringify(response.data.data.user));\n        this.$router.replace({\n          name: 'home'\n        });\n      }).catch(err => {\n        this.errTip();\n        console.log(err);\n      });\n    },\n    errTip() {\n      ElMessageBox.alert('用户已存在', '错误提示');\n    }\n  }\n};","map":{"version":3,"mappings":"AAwBA,SAASA,YAAW,QAAS,cAAc;AAC3C,OAAOC,cAAa,MAAO,0BAA0B;AACrD,OAAOC,WAAU,MAAO,uBAAuB;AAE/C,eAAe;EACbC,IAAI,GAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,IAAI,EAAE,EAAE;QACRC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE;MACZ,CAAC;MACDC,KAAK,EAAE;QACLH,IAAI,EAAE,CACJ;UAAEI,QAAQ,EAAE,KAAK;UAAEC,OAAO,EAAE,uBAAuB;UAAEC,OAAO,EAAE;QAAO,CAAC,CACvE;QACDC,SAAS,EAAE,CACT;UAAEH,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,wBAAwB;UAAEC,OAAO,EAAE;QAAO,CAAC,EACtE;UACEE,OAAO,EAAE,mBAAmB;UAAEH,OAAO,EAAE,SAAS;UAAEC,OAAO,EAAE,CAAC,MAAM;QACpE,CAAC,CACF;QACDL,QAAQ,EAAE,CACR;UAAEG,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,uBAAuB;UAAEC,OAAO,EAAE;QAAO,CAAC,EACrE;UAAEG,GAAG,EAAE,CAAC;UAAEJ,OAAO,EAAE,UAAU;UAAEC,OAAO,EAAE,CAAC,MAAM;QAAE,CAAC;MAEtD;IACF,CAAC;EACH,CAAC;EACDI,OAAO,EAAE;IACPC,QAAQ,GAAG;MACTd,WAAW,CAACc,QAAQ,CAAC,IAAI,CAACZ,IAAI,CAAC,CAACa,IAAI,CAAEC,GAAG,IAAK;QAC5C,IAAI,CAACC,MAAM,CAACC,MAAM,CAAC,sBAAsB,EAAEF,GAAG,CAACf,IAAI,CAACA,IAAI,CAACkB,KAAK,CAAC;QAC/DpB,cAAc,CAACqB,GAAG,CAACrB,cAAc,CAACsB,UAAU,EAAEL,GAAG,CAACf,IAAI,CAACA,IAAI,CAACkB,KAAK,CAAC;QAClE,OAAOnB,WAAW,CAACsB,IAAI,EAAE;MACzB,CAAC,CAAC,CAACP,IAAI,CAAEQ,QAAQ,IAAK;QACpBxB,cAAc,CAACqB,GAAG,CAACrB,cAAc,CAACyB,SAAS,EAAEC,IAAI,CAACC,SAAS,CAACH,QAAQ,CAACtB,IAAI,CAACA,IAAI,CAACC,IAAI,CAAC,CAAC;QACrF,IAAI,CAACyB,OAAO,CAACC,OAAO,CAAC;UAAEzB,IAAI,EAAE;QAAO,CAAC,CAAC;MAC1C,CAAC,CAAC,CAAC0B,KAAK,CAAEC,GAAG,IAAK;QAChB,IAAI,CAACC,MAAM,EAAE;QACbC,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;MAClB,CAAC,CAAC;IACJ,CAAC;IACDC,MAAM,GAAG;MACPjC,YAAY,CAACoC,KAAK,CAAC,OAAO,EAAE,MAAM,CAAC;IACrC;EACF;AACF,CAAC","names":["ElMessageBox","storageService","userService","data","user","name","password","elephone","rules","required","message","trigger","telephone","pattern","min","methods","register","then","res","$store","commit","token","set","USER_TOKEN","info","response","USER_INFO","JSON","stringify","$router","replace","catch","err","errTip","console","log","alert"],"sourceRoot":"","sources":["/home/maruka/Projects/go-web/gvp-f/src/views/register/UserRegister.vue"],"sourcesContent":["<template>\n    <div class=\"register\">\n           <el-container>\n        <el-main>\n    <el-form :model=\"user\" :rules=\"rules\">\n        <el-form-item label=\"UserName\" prop=\"name\">\n            <el-input v-model=\"user.name\"/>\n        </el-form-item>\n        <el-form-item label=\"Telephone\" prop=\"telephone\">\n        <el-input v-model=\"user.telephone\"/>\n        </el-form-item>\n        <el-form-item label=\"Password\" prop=\"password\">\n            <el-input type=\"password\" show-password v-model=\"user.password\"/>\n        </el-form-item>\n        <el-form-item>\n            <el-button type=\"primary\" @click=\"register\">register</el-button>\n        </el-form-item>\n    </el-form>\n    </el-main>\n    </el-container>\n    </div>\n</template>\n\n<script>\nimport { ElMessageBox } from 'element-plus';\nimport storageService from '@/service/storageService';\nimport userService from '@/service/userService';\n\nexport default {\n  data() {\n    return {\n      user: {\n        name: '',\n        password: '',\n        elephone: '',\n      },\n      rules: {\n        name: [\n          { required: false, message: 'please input username', trigger: 'blur' },\n        ],\n        telephone: [\n          { required: true, message: 'please input telephone', trigger: 'blur' },\n          {\n            pattern: /^1[3|4|5|7]\\d{9}$/, message: '电话号码不合法', trigger: ['blur'],\n          },\n        ],\n        password: [\n          { required: true, message: 'please input password', trigger: 'blur' },\n          { min: 6, message: '密码不得少于六位', trigger: ['blur'] },\n        ],\n      },\n    };\n  },\n  methods: {\n    register() {\n      userService.register(this.user).then((res) => {\n        this.$store.commit('userModule/SET_TOKEN', res.data.data.token);\n        storageService.set(storageService.USER_TOKEN, res.data.data.token);\n        return userService.info();\n        }).then((response) => {\n          storageService.set(storageService.USER_INFO, JSON.stringify(response.data.data.user));\n          this.$router.replace({ name: 'home' });\n      }).catch((err) => {\n        this.errTip();\n        console.log(err);\n      });\n    },\n    errTip() {\n      ElMessageBox.alert('用户已存在', '错误提示');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n"]},"metadata":{},"sourceType":"module"}